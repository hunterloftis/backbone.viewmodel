
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title> - jsFiddle demo by hunterloftis</title>

  <script type='text/javascript' src='/js/lib/zepto-0.8.js'></script>

  <link rel="stylesheet" type="text/css" href="/css/normalize.css">
  <link rel="stylesheet" type="text/css" href="/css/result-light.css">

  <style type='text/css'>
    label {
    display: block;
}

p {
    padding: 10px;
    font-size: 20px;
}

  </style>



<script type='text/javascript'>//<![CDATA[
window.onload=function(){
var user = new Backbone.Model({
    first: 'Hunter',
    last: 'Loftis',
    age: 27
});

var vm = new Backbone.ViewModel({
    model: user,
});

// Should you have to do it yourself?
vm.virtual('age', 'first', 'last', {
  get: function(attr) {
    var model = this.get('model');
    return model[attr];
  },
  set: function(attr, val) {
    var model = this.get('model');
    return model.set(attr, val);
  }
});

// No, that should be the default but overrideable behavior. This should work:
vm.virtual('age', 'first', 'last', function() {
  return this.get('model');
});

// This should also work (if you know the referenced model upfront):
vm.virtual('age', 'first', 'last', user);

// But none of the above will do anything with the referenced attribute changes on the other model
// Really, we want a Computed attribute, but without the verbose syntax. Maybe combine the two:

// Longest syntax. N attributes. Do something arbitrary in the functions. "get" is a computed value & watches dependents
vm.virtual('attr1', 'attr2', {
  get: function(attr) { ... },
  set: function(attr, val) { ... },
  fail: 'val'
});

// Passthrough function syntax. Gets and sets the same attributes on the returned model.
vm.virtual('attr1', 'attr2', function() {
  return this.get('model');
});

// Passthrough model syntax. Gets and sets the same attributes on the passed model.
vm.virtual('attr1', 'attr2', otherModel);

// Can be used exactly like a Computed (system looks at whether or not function takes `attr` argument)
vm.virtual('fullname', function(attr) {
  var model = this.get('model');
  return model.get('first') + ' ' + model.get('last');
});

// Can be used exactly like a verbose Computed as well
vm.virtual('isAdult', {
  get: function() ...
  set: function() ...
  fail: function() ...
})

vm.bindView('data-bind');
}//]]>

</script>


</head>
<body>
  <script src='https://raw.github.com/hunterloftis/backbone.viewmodel/master/vendor/underscore-1.3.3.js'></script>
<script src='https://raw.github.com/hunterloftis/backbone.viewmodel/master/vendor/backbone-0.9.2.js'></script>
<script src='https://raw.github.com/hunterloftis/backbone.viewmodel/master/dist/backbone.viewmodel-0.1.0.min.js'></script>

<h1>Adults only</h1>
<label>How old are you, <span data-bind='text: fullname'></span>?</label>
<input data-bind='val: age' />
<p data-bind='visible: isAdult'>XXX Here!</p>

</body>


</html>

